(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{3257:(function(G,ne,H){var K=Object.create,E=Object.defineProperty,q=Object.getOwnPropertyDescriptor,W=Object.getOwnPropertyNames,P=Object.getPrototypeOf,ee=Object.prototype.hasOwnProperty,B=(a,s)=>{for(var l in s)E(a,l,{get:s[l],enumerable:!0})},A=(a,s,l,h)=>{if(s&&typeof s=="object"||typeof s=="function")for(let c of W(s))!ee.call(a,c)&&c!==l&&E(a,c,{get:()=>s[c],enumerable:!(h=q(s,c))||h.enumerable});return a},C=(a,s,l)=>(l=a!=null?K(P(a)):{},A(s||!a||!a.__esModule?E(l,"default",{value:a,enumerable:!0}):l,a)),N=a=>A(E({},"__esModule",{value:!0}),a),f={};B(f,{default:()=>n,zstd:()=>m}),G.exports=N(f);var e=H(3263),r=C(H(3265)),u=H(3264),t=C(H(1898)),i=H(223);const m=new u.ZSTDDecoder;class n extends t.default{decodeBlock(s){const l=this.parameters.LercParameters[i.LercParameters.AddCompression];switch(l){case i.LercAddCompression.None:break;case i.LercAddCompression.Deflate:s=(0,e.inflate)(new Uint8Array(s)).buffer;break;case i.LercAddCompression.Zstandard:s=m.decode(new Uint8Array(s)).buffer;break;default:throw new Error(`Unsupported LERC additional compression method identifier: ${l}`)}return r.default.decode(s,{returnPixelInterleavedDims:this.parameters.planarConfiguration===1}).pixels[0].buffer}}}),3265:(function(G,ne,H){var K,E;/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */(function(){var q=(function(){var B={};B.defaultNoDataValue=-34027999387901484e22,B.decode=function(r,u){u=u||{};var t=u.encodedMaskData||u.encodedMaskData===null,i=f(r,u.inputOffset||0,t),m=u.noDataValue!==null?u.noDataValue:B.defaultNoDataValue,n=A(i,u.pixelType||Float32Array,u.encodedMaskData,m,u.returnMask),a={width:i.width,height:i.height,pixelData:n.resultPixels,minValue:n.minValue,maxValue:i.pixels.maxValue,noDataValue:m};return n.resultMask&&(a.maskData=n.resultMask),u.returnEncodedMask&&i.mask&&(a.encodedMaskData=i.mask.bitset?i.mask.bitset:null),u.returnFileInfo&&(a.fileInfo=C(i),u.computeUsedBitDepths&&(a.fileInfo.bitDepths=N(i))),a};var A=function(r,u,t,i,m){var n=0,a=r.pixels.numBlocksX,s=r.pixels.numBlocksY,l=Math.floor(r.width/a),h=Math.floor(r.height/s),c=2*r.maxZError,v=Number.MAX_VALUE,o;t=t||(r.mask?r.mask.bitset:null);var w,I;w=new u(r.width*r.height),m&&t&&(I=new Uint8Array(r.width*r.height));for(var D=new Float32Array(l*h),d,x,k=0;k<=s;k++){var L=k!==s?h:r.height%s;if(L!==0)for(var p=0;p<=a;p++){var g=p!==a?l:r.width%a;if(g!==0){var U=k*r.width*h+p*l,T=r.width-g,y=r.pixels.blocks[n],V,M,S;y.encoding<2?(y.encoding===0?V=y.rawData:(e(y.stuffedData,y.bitsPerPixel,y.numValidPixels,y.offset,c,D,r.pixels.maxValue),V=D),M=0):y.encoding===2?S=0:S=y.offset;var b;if(t)for(x=0;x<L;x++){for(U&7&&(b=t[U>>3],b<<=U&7),d=0;d<g;d++)U&7||(b=t[U>>3]),b&128?(I&&(I[U]=1),o=y.encoding<2?V[M++]:S,v=v>o?o:v,w[U++]=o):(I&&(I[U]=0),w[U++]=i),b<<=1;U+=T}else if(y.encoding<2)for(x=0;x<L;x++){for(d=0;d<g;d++)o=V[M++],v=v>o?o:v,w[U++]=o;U+=T}else for(v=v>S?S:v,x=0;x<L;x++){for(d=0;d<g;d++)w[U++]=S;U+=T}if(y.encoding===1&&M!==y.numValidPixels)throw"Block and Mask do not match";n++}}}return{resultPixels:w,resultMask:I,minValue:v}},C=function(r){return{fileIdentifierString:r.fileIdentifierString,fileVersion:r.fileVersion,imageType:r.imageType,height:r.height,width:r.width,maxZError:r.maxZError,eofOffset:r.eofOffset,mask:r.mask?{numBlocksX:r.mask.numBlocksX,numBlocksY:r.mask.numBlocksY,numBytes:r.mask.numBytes,maxValue:r.mask.maxValue}:null,pixels:{numBlocksX:r.pixels.numBlocksX,numBlocksY:r.pixels.numBlocksY,numBytes:r.pixels.numBytes,maxValue:r.pixels.maxValue,noDataValue:r.noDataValue}}},N=function(r){for(var u=r.pixels.numBlocksX*r.pixels.numBlocksY,t={},i=0;i<u;i++){var m=r.pixels.blocks[i];m.encoding===0?t.float32=!0:m.encoding===1?t[m.bitsPerPixel]=!0:t[0]=!0}return Object.keys(t)},f=function(r,u,t){var i={},m=new Uint8Array(r,u,10);if(i.fileIdentifierString=String.fromCharCode.apply(null,m),i.fileIdentifierString.trim()!=="CntZImage")throw"Unexpected file identifier string: "+i.fileIdentifierString;u+=10;var n=new DataView(r,u,24);if(i.fileVersion=n.getInt32(0,!0),i.imageType=n.getInt32(4,!0),i.height=n.getUint32(8,!0),i.width=n.getUint32(12,!0),i.maxZError=n.getFloat64(16,!0),u+=24,!t)if(n=new DataView(r,u,16),i.mask={},i.mask.numBlocksY=n.getUint32(0,!0),i.mask.numBlocksX=n.getUint32(4,!0),i.mask.numBytes=n.getUint32(8,!0),i.mask.maxValue=n.getFloat32(12,!0),u+=16,i.mask.numBytes>0){var a=new Uint8Array(Math.ceil(i.width*i.height/8));n=new DataView(r,u,i.mask.numBytes);var s=n.getInt16(0,!0),l=2,h=0;do{if(s>0)for(;s--;)a[h++]=n.getUint8(l++);else{var c=n.getUint8(l++);for(s=-s;s--;)a[h++]=c}s=n.getInt16(l,!0),l+=2}while(l<i.mask.numBytes);if(s!==-32768||h<a.length)throw"Unexpected end of mask RLE encoding";i.mask.bitset=a,u+=i.mask.numBytes}else(i.mask.numBytes|i.mask.numBlocksY|i.mask.maxValue)===0&&(i.mask.bitset=new Uint8Array(Math.ceil(i.width*i.height/8)));n=new DataView(r,u,16),i.pixels={},i.pixels.numBlocksY=n.getUint32(0,!0),i.pixels.numBlocksX=n.getUint32(4,!0),i.pixels.numBytes=n.getUint32(8,!0),i.pixels.maxValue=n.getFloat32(12,!0),u+=16;var v=i.pixels.numBlocksX,o=i.pixels.numBlocksY,w=v+(i.width%v>0?1:0),I=o+(i.height%o>0?1:0);i.pixels.blocks=new Array(w*I);for(var D=0,d=0;d<I;d++)for(var x=0;x<w;x++){var k=0,L=r.byteLength-u;n=new DataView(r,u,Math.min(10,L));var p={};i.pixels.blocks[D++]=p;var g=n.getUint8(0);if(k++,p.encoding=g&63,p.encoding>3)throw"Invalid block encoding ("+p.encoding+")";if(p.encoding===2){u++;continue}if(g!==0&&g!==2){if(g>>=6,p.offsetType=g,g===2)p.offset=n.getInt8(1),k++;else if(g===1)p.offset=n.getInt16(1,!0),k+=2;else if(g===0)p.offset=n.getFloat32(1,!0),k+=4;else throw"Invalid block offset type";if(p.encoding===1)if(g=n.getUint8(k),k++,p.bitsPerPixel=g&63,g>>=6,p.numValidPixelsType=g,g===2)p.numValidPixels=n.getUint8(k),k++;else if(g===1)p.numValidPixels=n.getUint16(k,!0),k+=2;else if(g===0)p.numValidPixels=n.getUint32(k,!0),k+=4;else throw"Invalid valid pixel count type"}if(u+=k,p.encoding!==3){var U,T;if(p.encoding===0){var y=(i.pixels.numBytes-1)/4;if(y!==Math.floor(y))throw"uncompressed block has invalid length";U=new ArrayBuffer(y*4),T=new Uint8Array(U),T.set(new Uint8Array(r,u,y*4));var V=new Float32Array(U);p.rawData=V,u+=y*4}else if(p.encoding===1){var M=Math.ceil(p.numValidPixels*p.bitsPerPixel/8),S=Math.ceil(M/4);U=new ArrayBuffer(S*4),T=new Uint8Array(U),T.set(new Uint8Array(r,u,M)),p.stuffedData=new Uint32Array(U),u+=M}}}return i.eofOffset=u,i},e=function(r,u,t,i,m,n,a){var s=(1<<u)-1,l=0,h,c=0,v,o,w=Math.ceil((a-i)/m),I=r.length*4-Math.ceil(u*t/8);for(r[r.length-1]<<=8*I,h=0;h<t;h++){if(c===0&&(o=r[l++],c=32),c>=u)v=o>>>c-u&s,c-=u;else{var D=u-c;v=(o&s)<<D&s,o=r[l++],c=32-D,v+=o>>>c}n[h]=v<w?i+v*m:a}return n};return B})(),W=(function(){"use strict";var B={unstuff:function(f,e,r,u,t,i,m,n){var a=(1<<r)-1,s=0,l,h=0,c,v,o,w,I=f.length*4-Math.ceil(r*u/8);if(f[f.length-1]<<=8*I,t)for(l=0;l<u;l++)h===0&&(v=f[s++],h=32),h>=r?(c=v>>>h-r&a,h-=r):(o=r-h,c=(v&a)<<o&a,v=f[s++],h=32-o,c+=v>>>h),e[l]=t[c];else for(w=Math.ceil((n-i)/m),l=0;l<u;l++)h===0&&(v=f[s++],h=32),h>=r?(c=v>>>h-r&a,h-=r):(o=r-h,c=(v&a)<<o&a,v=f[s++],h=32-o,c+=v>>>h),e[l]=c<w?i+c*m:n},unstuffLUT:function(f,e,r,u,t,i){var m=(1<<e)-1,n=0,a=0,s=0,l=0,h=0,c,v=[],o=f.length*4-Math.ceil(e*r/8);f[f.length-1]<<=8*o;var w=Math.ceil((i-u)/t);for(a=0;a<r;a++)l===0&&(c=f[n++],l=32),l>=e?(h=c>>>l-e&m,l-=e):(s=e-l,h=(c&m)<<s&m,c=f[n++],l=32-s,h+=c>>>l),v[a]=h<w?u+h*t:i;return v.unshift(u),v},unstuff2:function(f,e,r,u,t,i,m,n){var a=(1<<r)-1,s=0,l,h=0,c=0,v,o,w;if(t)for(l=0;l<u;l++)h===0&&(o=f[s++],h=32,c=0),h>=r?(v=o>>>c&a,h-=r,c+=r):(w=r-h,v=o>>>c&a,o=f[s++],h=32-w,v|=(o&(1<<w)-1)<<r-w,c=w),e[l]=t[v];else{var I=Math.ceil((n-i)/m);for(l=0;l<u;l++)h===0&&(o=f[s++],h=32,c=0),h>=r?(v=o>>>c&a,h-=r,c+=r):(w=r-h,v=o>>>c&a,o=f[s++],h=32-w,v|=(o&(1<<w)-1)<<r-w,c=w),e[l]=v<I?i+v*m:n}return e},unstuffLUT2:function(f,e,r,u,t,i){var m=(1<<e)-1,n=0,a=0,s=0,l=0,h=0,c=0,v,o=[],w=Math.ceil((i-u)/t);for(a=0;a<r;a++)l===0&&(v=f[n++],l=32,c=0),l>=e?(h=v>>>c&m,l-=e,c+=e):(s=e-l,h=v>>>c&m,v=f[n++],l=32-s,h|=(v&(1<<s)-1)<<e-s,c=s),o[a]=h<w?u+h*t:i;return o.unshift(u),o},originalUnstuff:function(f,e,r,u){var t=(1<<r)-1,i=0,m,n=0,a,s,l,h=f.length*4-Math.ceil(r*u/8);for(f[f.length-1]<<=8*h,m=0;m<u;m++)n===0&&(s=f[i++],n=32),n>=r?(a=s>>>n-r&t,n-=r):(l=r-n,a=(s&t)<<l&t,s=f[i++],n=32-l,a+=s>>>n),e[m]=a;return e},originalUnstuff2:function(f,e,r,u){var t=(1<<r)-1,i=0,m,n=0,a=0,s,l,h;for(m=0;m<u;m++)n===0&&(l=f[i++],n=32,a=0),n>=r?(s=l>>>a&t,n-=r,a+=r):(h=r-n,s=l>>>a&t,l=f[i++],n=32-h,s|=(l&(1<<h)-1)<<r-h,a=h),e[m]=s;return e}},A={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(f){for(var e=65535,r=65535,u=f.length,t=Math.floor(u/2),i=0;t;){var m=t>=359?359:t;t-=m;do e+=f[i++]<<8,r+=e+=f[i++];while(--m);e=(e&65535)+(e>>>16),r=(r&65535)+(r>>>16)}return u&1&&(r+=e+=f[i]<<8),e=(e&65535)+(e>>>16),r=(r&65535)+(r>>>16),(r<<16|e)>>>0},readHeaderInfo:function(f,e){var r=e.ptr,u=new Uint8Array(f,r,6),t={};if(t.fileIdentifierString=String.fromCharCode.apply(null,u),t.fileIdentifierString.lastIndexOf("Lerc2",0)!==0)throw"Unexpected file identifier string (expect Lerc2 ): "+t.fileIdentifierString;r+=6;var i=new DataView(f,r,8),m=i.getInt32(0,!0);t.fileVersion=m,r+=4,m>=3&&(t.checksum=i.getUint32(4,!0),r+=4),i=new DataView(f,r,12),t.height=i.getUint32(0,!0),t.width=i.getUint32(4,!0),r+=8,m>=4?(t.numDims=i.getUint32(8,!0),r+=4):t.numDims=1,i=new DataView(f,r,40),t.numValidPixel=i.getUint32(0,!0),t.microBlockSize=i.getInt32(4,!0),t.blobSize=i.getInt32(8,!0),t.imageType=i.getInt32(12,!0),t.maxZError=i.getFloat64(16,!0),t.zMin=i.getFloat64(24,!0),t.zMax=i.getFloat64(32,!0),r+=40,e.headerInfo=t,e.ptr=r;var n,a;if(m>=3&&(a=m>=4?52:48,n=this.computeChecksumFletcher32(new Uint8Array(f,r-a,t.blobSize-14)),n!==t.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(f,e){var r=e.headerInfo,u=this.getDataTypeArray(r.imageType),t=r.numDims*this.getDataTypeSize(r.imageType),i=this.readSubArray(f,e.ptr,u,t),m=this.readSubArray(f,e.ptr+t,u,t);e.ptr+=2*t;var n,a=!0;for(n=0;n<r.numDims;n++)if(i[n]!==m[n]){a=!1;break}return r.minValues=i,r.maxValues=m,a},readSubArray:function(f,e,r,u){var t;if(r===Uint8Array)t=new Uint8Array(f,e,u);else{var i=new ArrayBuffer(u),m=new Uint8Array(i);m.set(new Uint8Array(f,e,u)),t=new r(i)}return t},readMask:function(f,e){var r=e.ptr,u=e.headerInfo,t=u.width*u.height,i=u.numValidPixel,m=new DataView(f,r,4),n={};if(n.numBytes=m.getUint32(0,!0),r+=4,(i===0||t===i)&&n.numBytes!==0)throw"invalid mask";var a,s;if(i===0)a=new Uint8Array(Math.ceil(t/8)),n.bitset=a,s=new Uint8Array(t),e.pixels.resultMask=s,r+=n.numBytes;else if(n.numBytes>0){a=new Uint8Array(Math.ceil(t/8)),m=new DataView(f,r,n.numBytes);var l=m.getInt16(0,!0),h=2,c=0,v=0;do{if(l>0)for(;l--;)a[c++]=m.getUint8(h++);else for(v=m.getUint8(h++),l=-l;l--;)a[c++]=v;l=m.getInt16(h,!0),h+=2}while(h<n.numBytes);if(l!==-32768||c<a.length)throw"Unexpected end of mask RLE encoding";s=new Uint8Array(t);var o=0,w=0;for(w=0;w<t;w++)w&7?(o=a[w>>3],o<<=w&7):o=a[w>>3],o&128&&(s[w]=1);e.pixels.resultMask=s,n.bitset=a,r+=n.numBytes}return e.ptr=r,e.mask=n,!0},readDataOneSweep:function(f,e,r,u){var t=e.ptr,i=e.headerInfo,m=i.numDims,n=i.width*i.height,a=i.imageType,s=i.numValidPixel*A.getDataTypeSize(a)*m,l,h=e.pixels.resultMask;if(r===Uint8Array)l=new Uint8Array(f,t,s);else{var c=new ArrayBuffer(s),v=new Uint8Array(c);v.set(new Uint8Array(f,t,s)),l=new r(c)}if(l.length===n*m)u?e.pixels.resultPixels=A.swapDimensionOrder(l,n,m,r,!0):e.pixels.resultPixels=l;else{e.pixels.resultPixels=new r(n*m);var o=0,w=0,I=0,D=0;if(m>1){if(u){for(w=0;w<n;w++)if(h[w])for(D=w,I=0;I<m;I++,D+=n)e.pixels.resultPixels[D]=l[o++]}else for(w=0;w<n;w++)if(h[w])for(D=w*m,I=0;I<m;I++)e.pixels.resultPixels[D+I]=l[o++]}else for(w=0;w<n;w++)h[w]&&(e.pixels.resultPixels[w]=l[o++])}return t+=s,e.ptr=t,!0},readHuffmanTree:function(f,e){var r=this.HUFFMAN_LUT_BITS_MAX,u=new DataView(f,e.ptr,16);e.ptr+=16;var t=u.getInt32(0,!0);if(t<2)throw"unsupported Huffman version";var i=u.getInt32(4,!0),m=u.getInt32(8,!0),n=u.getInt32(12,!0);if(m>=n)return!1;var a=new Uint32Array(n-m);A.decodeBits(f,e,a);var s=[],l,h,c,v;for(l=m;l<n;l++)h=l-(l<i?0:i),s[h]={first:a[l-m],second:null};var o=f.byteLength-e.ptr,w=Math.ceil(o/4),I=new ArrayBuffer(w*4),D=new Uint8Array(I);D.set(new Uint8Array(f,e.ptr,o));var d=new Uint32Array(I),x=0,k,L=0;for(k=d[0],l=m;l<n;l++)h=l-(l<i?0:i),v=s[h].first,v>0&&(s[h].second=k<<x>>>32-v,32-x>=v?(x+=v,x===32&&(x=0,L++,k=d[L])):(x+=v-32,L++,k=d[L],s[h].second|=k>>>32-x));var p=0,g=0,U=new C;for(l=0;l<s.length;l++)s[l]!==void 0&&(p=Math.max(p,s[l].first));p>=r?g=r:g=p;var T=[],y,V,M,S,b,_;for(l=m;l<n;l++)if(h=l-(l<i?0:i),v=s[h].first,v>0)if(y=[v,h],v<=g)for(V=s[h].second<<g-v,M=1<<g-v,c=0;c<M;c++)T[V|c]=y;else for(V=s[h].second,_=U,S=v-1;S>=0;S--)b=V>>>S&1,b?(_.right||(_.right=new C),_=_.right):(_.left||(_.left=new C),_=_.left),S===0&&!_.val&&(_.val=y[1]);return{decodeLut:T,numBitsLUTQick:g,numBitsLUT:p,tree:U,stuffedData:d,srcPtr:L,bitPos:x}},readHuffman:function(f,e,r,u){var t=e.headerInfo,i=t.numDims,m=e.headerInfo.height,n=e.headerInfo.width,a=n*m,s=this.readHuffmanTree(f,e),l=s.decodeLut,h=s.tree,c=s.stuffedData,v=s.srcPtr,o=s.bitPos,w=s.numBitsLUTQick,I=s.numBitsLUT,D=e.headerInfo.imageType===0?128:0,d,x,k,L=e.pixels.resultMask,p,g,U,T,y,V,M,S=0;o>0&&(v++,o=0);var b=c[v],_=e.encodeMode===1,Z=new r(a*i),F=Z,O;if(i<2||_){for(O=0;O<i;O++)if(i>1&&(F=new r(Z.buffer,a*O,a),S=0),e.headerInfo.numValidPixel===n*m)for(V=0,T=0;T<m;T++)for(y=0;y<n;y++,V++){if(x=0,p=b<<o>>>32-w,g=p,32-o<w&&(p|=c[v+1]>>>64-o-w,g=p),l[g])x=l[g][1],o+=l[g][0];else for(p=b<<o>>>32-I,g=p,32-o<I&&(p|=c[v+1]>>>64-o-I,g=p),d=h,M=0;M<I;M++)if(U=p>>>I-M-1&1,d=U?d.right:d.left,!(d.left||d.right)){x=d.val,o=o+M+1;break}o>=32&&(o-=32,v++,b=c[v]),k=x-D,_?(y>0?k+=S:T>0?k+=F[V-n]:k+=S,k&=255,F[V]=k,S=k):F[V]=k}else for(V=0,T=0;T<m;T++)for(y=0;y<n;y++,V++)if(L[V]){if(x=0,p=b<<o>>>32-w,g=p,32-o<w&&(p|=c[v+1]>>>64-o-w,g=p),l[g])x=l[g][1],o+=l[g][0];else for(p=b<<o>>>32-I,g=p,32-o<I&&(p|=c[v+1]>>>64-o-I,g=p),d=h,M=0;M<I;M++)if(U=p>>>I-M-1&1,d=U?d.right:d.left,!(d.left||d.right)){x=d.val,o=o+M+1;break}o>=32&&(o-=32,v++,b=c[v]),k=x-D,_?(y>0&&L[V-1]?k+=S:T>0&&L[V-n]?k+=F[V-n]:k+=S,k&=255,F[V]=k,S=k):F[V]=k}}else for(V=0,T=0;T<m;T++)for(y=0;y<n;y++)if(V=T*n+y,!L||L[V])for(O=0;O<i;O++,V+=a){if(x=0,p=b<<o>>>32-w,g=p,32-o<w&&(p|=c[v+1]>>>64-o-w,g=p),l[g])x=l[g][1],o+=l[g][0];else for(p=b<<o>>>32-I,g=p,32-o<I&&(p|=c[v+1]>>>64-o-I,g=p),d=h,M=0;M<I;M++)if(U=p>>>I-M-1&1,d=U?d.right:d.left,!(d.left||d.right)){x=d.val,o=o+M+1;break}o>=32&&(o-=32,v++,b=c[v]),k=x-D,F[V]=k}e.ptr=e.ptr+(v+1)*4+(o>0?4:0),e.pixels.resultPixels=Z,i>1&&!u&&(e.pixels.resultPixels=A.swapDimensionOrder(Z,a,i,r))},decodeBits:function(f,e,r,u,t){{var i=e.headerInfo,m=i.fileVersion,n=0,a=f.byteLength-e.ptr>=5?5:f.byteLength-e.ptr,s=new DataView(f,e.ptr,a),l=s.getUint8(0);n++;var h=l>>6,c=h===0?4:3-h,v=(l&32)>0,o=l&31,w=0;if(c===1)w=s.getUint8(n),n++;else if(c===2)w=s.getUint16(n,!0),n+=2;else if(c===4)w=s.getUint32(n,!0),n+=4;else throw"Invalid valid pixel count type";var I=2*i.maxZError,D,d,x,k,L,p,g,U,T,y,V=i.numDims>1?i.maxValues[t]:i.zMax;if(v){for(e.counter.lut++,U=s.getUint8(n),T=o,n++,k=Math.ceil((U-1)*o/8),L=Math.ceil(k/4),d=new ArrayBuffer(L*4),x=new Uint8Array(d),e.ptr+=n,x.set(new Uint8Array(f,e.ptr,k)),g=new Uint32Array(d),e.ptr+=k,y=0;U-1>>>y;)y++;k=Math.ceil(w*y/8),L=Math.ceil(k/4),d=new ArrayBuffer(L*4),x=new Uint8Array(d),x.set(new Uint8Array(f,e.ptr,k)),D=new Uint32Array(d),e.ptr+=k,m>=3?p=B.unstuffLUT2(g,o,U-1,u,I,V):p=B.unstuffLUT(g,o,U-1,u,I,V),m>=3?B.unstuff2(D,r,y,w,p):B.unstuff(D,r,y,w,p)}else e.counter.bitstuffer++,y=o,e.ptr+=n,y>0&&(k=Math.ceil(w*y/8),L=Math.ceil(k/4),d=new ArrayBuffer(L*4),x=new Uint8Array(d),x.set(new Uint8Array(f,e.ptr,k)),D=new Uint32Array(d),e.ptr+=k,m>=3?u==null?B.originalUnstuff2(D,r,y,w):B.unstuff2(D,r,y,w,!1,u,I,V):u==null?B.originalUnstuff(D,r,y,w):B.unstuff(D,r,y,w,!1,u,I,V))}},readTiles:function(f,e,r,u){var t=e.headerInfo,i=t.width,m=t.height,n=i*m,a=t.microBlockSize,s=t.imageType,l=A.getDataTypeSize(s),h=Math.ceil(i/a),c=Math.ceil(m/a);e.pixels.numBlocksY=c,e.pixels.numBlocksX=h,e.pixels.ptr=0;var v=0,o=0,w=0,I=0,D=0,d=0,x=0,k=0,L=0,p=0,g=0,U=0,T=0,y=0,V=0,M=0,S,b,_,Z,F,O,Q=new r(a*a),te=m%a||a,fe=i%a||a,re,J,$=t.numDims,R,X=e.pixels.resultMask,z=e.pixels.resultPixels,se=t.fileVersion,ae=se>=5?14:15,Y,ie=t.zMax,j;for(w=0;w<c;w++)for(D=w!==c-1?a:te,I=0;I<h;I++)for(d=I!==h-1?a:fe,g=w*i*a+I*a,U=i-d,R=0;R<$;R++){if($>1?(j=z,g=w*i*a+I*a,z=new r(e.pixels.resultPixels.buffer,n*R*l,n),ie=t.maxValues[R]):j=null,x=f.byteLength-e.ptr,S=new DataView(f,e.ptr,Math.min(10,x)),b={},M=0,k=S.getUint8(0),M++,Y=t.fileVersion>=5?k&4:0,L=k>>6&255,p=k>>2&ae,p!==(I*a>>3&ae)||Y&&R===0)throw"integrity issue";if(O=k&3,O>3)throw e.ptr+=M,"Invalid block encoding ("+O+")";if(O===2){if(Y)if(X)for(v=0;v<D;v++)for(o=0;o<d;o++)X[g]&&(z[g]=j[g]),g++;else for(v=0;v<D;v++)for(o=0;o<d;o++)z[g]=j[g],g++;e.counter.constant++,e.ptr+=M;continue}else if(O===0){if(Y)throw"integrity issue";if(e.counter.uncompressed++,e.ptr+=M,T=D*d*l,y=f.byteLength-e.ptr,T=T<y?T:y,_=new ArrayBuffer(T%l===0?T:T+l-T%l),Z=new Uint8Array(_),Z.set(new Uint8Array(f,e.ptr,T)),F=new r(_),V=0,X)for(v=0;v<D;v++){for(o=0;o<d;o++)X[g]&&(z[g]=F[V++]),g++;g+=U}else for(v=0;v<D;v++){for(o=0;o<d;o++)z[g++]=F[V++];g+=U}e.ptr+=V*l}else if(re=A.getDataTypeUsed(Y&&s<6?4:s,L),J=A.getOnePixel(b,M,re,S),M+=A.getDataTypeSize(re),O===3)if(e.ptr+=M,e.counter.constantoffset++,X)for(v=0;v<D;v++){for(o=0;o<d;o++)X[g]&&(z[g]=Y?Math.min(ie,j[g]+J):J),g++;g+=U}else for(v=0;v<D;v++){for(o=0;o<d;o++)z[g]=Y?Math.min(ie,j[g]+J):J,g++;g+=U}else if(e.ptr+=M,A.decodeBits(f,e,Q,J,R),M=0,Y)if(X)for(v=0;v<D;v++){for(o=0;o<d;o++)X[g]&&(z[g]=Q[M++]+j[g]),g++;g+=U}else for(v=0;v<D;v++){for(o=0;o<d;o++)z[g]=Q[M++]+j[g],g++;g+=U}else if(X)for(v=0;v<D;v++){for(o=0;o<d;o++)X[g]&&(z[g]=Q[M++]),g++;g+=U}else for(v=0;v<D;v++){for(o=0;o<d;o++)z[g++]=Q[M++];g+=U}}$>1&&!u&&(e.pixels.resultPixels=A.swapDimensionOrder(e.pixels.resultPixels,n,$,r))},formatFileInfo:function(f){return{fileIdentifierString:f.headerInfo.fileIdentifierString,fileVersion:f.headerInfo.fileVersion,imageType:f.headerInfo.imageType,height:f.headerInfo.height,width:f.headerInfo.width,numValidPixel:f.headerInfo.numValidPixel,microBlockSize:f.headerInfo.microBlockSize,blobSize:f.headerInfo.blobSize,maxZError:f.headerInfo.maxZError,pixelType:A.getPixelType(f.headerInfo.imageType),eofOffset:f.eofOffset,mask:f.mask?{numBytes:f.mask.numBytes}:null,pixels:{numBlocksX:f.pixels.numBlocksX,numBlocksY:f.pixels.numBlocksY,maxValue:f.headerInfo.zMax,minValue:f.headerInfo.zMin,noDataValue:f.noDataValue}}},constructConstantSurface:function(f,e){var r=f.headerInfo.zMax,u=f.headerInfo.zMin,t=f.headerInfo.maxValues,i=f.headerInfo.numDims,m=f.headerInfo.height*f.headerInfo.width,n=0,a=0,s=0,l=f.pixels.resultMask,h=f.pixels.resultPixels;if(l)if(i>1){if(e)for(n=0;n<i;n++)for(s=n*m,r=t[n],a=0;a<m;a++)l[a]&&(h[s+a]=r);else for(a=0;a<m;a++)if(l[a])for(s=a*i,n=0;n<i;n++)h[s+i]=t[n]}else for(a=0;a<m;a++)l[a]&&(h[a]=r);else if(i>1&&u!==r)if(e)for(n=0;n<i;n++)for(s=n*m,r=t[n],a=0;a<m;a++)h[s+a]=r;else for(a=0;a<m;a++)for(s=a*i,n=0;n<i;n++)h[s+n]=t[n];else for(a=0;a<m*i;a++)h[a]=r},getDataTypeArray:function(f){var e;switch(f){case 0:e=Int8Array;break;case 1:e=Uint8Array;break;case 2:e=Int16Array;break;case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:e=Float32Array;break;case 7:e=Float64Array;break;default:e=Float32Array}return e},getPixelType:function(f){var e;switch(f){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:e="F32";break;case 7:e="F64";break;default:e="F32"}return e},isValidPixelValue:function(f,e){if(e==null)return!1;var r;switch(f){case 0:r=e>=-128&&e<=127;break;case 1:r=e>=0&&e<=255;break;case 2:r=e>=-32768&&e<=32767;break;case 3:r=e>=0&&e<=65536;break;case 4:r=e>=-2147483648&&e<=2147483647;break;case 5:r=e>=0&&e<=4294967296;break;case 6:r=e>=-34027999387901484e22&&e<=34027999387901484e22;break;case 7:r=e>=-17976931348623157e292&&e<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(f){var e=0;switch(f){case 0:case 1:e=1;break;case 2:case 3:e=2;break;case 4:case 5:case 6:e=4;break;case 7:e=8;break;default:e=f}return e},getDataTypeUsed:function(f,e){var r=f;switch(f){case 2:case 4:r=f-e;break;case 3:case 5:r=f-2*e;break;case 6:e===0?r=f:e===1?r=2:r=1;break;case 7:e===0?r=f:r=f-2*e+1;break;default:r=f;break}return r},getOnePixel:function(f,e,r,u){var t=0;switch(r){case 0:t=u.getInt8(e);break;case 1:t=u.getUint8(e);break;case 2:t=u.getInt16(e,!0);break;case 3:t=u.getUint16(e,!0);break;case 4:t=u.getInt32(e,!0);break;case 5:t=u.getUInt32(e,!0);break;case 6:t=u.getFloat32(e,!0);break;case 7:t=u.getFloat64(e,!0);break;default:throw"the decoder does not understand this pixel type"}return t},swapDimensionOrder:function(f,e,r,u,t){var i=0,m=0,n=0,a=0,s=f;if(r>1)if(s=new u(e*r),t)for(i=0;i<e;i++)for(a=i,n=0;n<r;n++,a+=e)s[a]=f[m++];else for(i=0;i<e;i++)for(a=i,n=0;n<r;n++,a+=e)s[m++]=f[a];return s}},C=function(f,e,r){this.val=f,this.left=e,this.right=r},N={decode:function(f,e){e=e||{};var r=e.noDataValue,u=0,t={};if(t.ptr=e.inputOffset||0,t.pixels={},!!A.readHeaderInfo(f,t)){var i=t.headerInfo,m=i.fileVersion,n=A.getDataTypeArray(i.imageType);if(m>5)throw"unsupported lerc version 2."+m;A.readMask(f,t),i.numValidPixel!==i.width*i.height&&!t.pixels.resultMask&&(t.pixels.resultMask=e.maskData);var a=i.width*i.height;t.pixels.resultPixels=new n(a*i.numDims),t.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var s=!e.returnPixelInterleavedDims;if(i.numValidPixel!==0)if(i.zMax===i.zMin)A.constructConstantSurface(t,s);else if(m>=4&&A.checkMinMaxRanges(f,t))A.constructConstantSurface(t,s);else{var l=new DataView(f,t.ptr,2),h=l.getUint8(0);if(t.ptr++,h)A.readDataOneSweep(f,t,n,s);else if(m>1&&i.imageType<=1&&Math.abs(i.maxZError-.5)<1e-5){var c=l.getUint8(1);if(t.ptr++,t.encodeMode=c,c>2||m<4&&c>1)throw"Invalid Huffman flag "+c;c?A.readHuffman(f,t,n,s):A.readTiles(f,t,n,s)}else A.readTiles(f,t,n,s)}t.eofOffset=t.ptr;var v;e.inputOffset?(v=t.headerInfo.blobSize+e.inputOffset-t.ptr,Math.abs(v)>=1&&(t.eofOffset=e.inputOffset+t.headerInfo.blobSize)):(v=t.headerInfo.blobSize-t.ptr,Math.abs(v)>=1&&(t.eofOffset=t.headerInfo.blobSize));var o={width:i.width,height:i.height,pixelData:t.pixels.resultPixels,minValue:i.zMin,maxValue:i.zMax,validPixelCount:i.numValidPixel,dimCount:i.numDims,dimStats:{minValues:i.minValues,maxValues:i.maxValues},maskData:t.pixels.resultMask};if(t.pixels.resultMask&&A.isValidPixelValue(i.imageType,r)){var w=t.pixels.resultMask;for(u=0;u<a;u++)w[u]||(o.pixelData[u]=r);o.noDataValue=r}return t.noDataValue=r,e.returnFileInfo&&(o.fileInfo=A.formatFileInfo(t)),o}},getBandCount:function(f){var e=0,r=0,u={};for(u.ptr=0,u.pixels={};r<f.byteLength-58;)A.readHeaderInfo(f,u),r+=u.headerInfo.blobSize,e++,u.ptr=r;return e}};return N})(),P=(function(){var B=new ArrayBuffer(4),A=new Uint8Array(B),C=new Uint32Array(B);return C[0]=1,A[0]===1})(),ee={decode:function(B,A){if(!P)throw"Big endian system is not supported.";A=A||{};var C=A.inputOffset||0,N=new Uint8Array(B,C,10),f=String.fromCharCode.apply(null,N),e,r;if(f.trim()==="CntZImage")e=q,r=1;else if(f.substring(0,5)==="Lerc2")e=W,r=2;else throw"Unexpected file identifier string: "+f;for(var u=0,t=B.byteLength-10,i,m=[],n,a,s={width:0,height:0,pixels:[],pixelType:A.pixelType,mask:null,statistics:[]},l=0;C<t;){var h=e.decode(B,{inputOffset:C,encodedMaskData:i,maskData:a,returnMask:u===0,returnEncodedMask:u===0,returnFileInfo:!0,returnPixelInterleavedDims:A.returnPixelInterleavedDims,pixelType:A.pixelType||null,noDataValue:A.noDataValue||null});C=h.fileInfo.eofOffset,a=h.maskData,u===0&&(i=h.encodedMaskData,s.width=h.width,s.height=h.height,s.dimCount=h.dimCount||1,s.pixelType=h.pixelType||h.fileInfo.pixelType,s.mask=a),r>1&&(a&&m.push(a),h.fileInfo.mask&&h.fileInfo.mask.numBytes>0&&l++),u++,s.pixels.push(h.pixelData),s.statistics.push({minValue:h.minValue,maxValue:h.maxValue,noDataValue:h.noDataValue,dimStats:h.dimStats})}var c,v,o;if(r>1&&l>1){for(o=s.width*s.height,s.bandMasks=m,a=new Uint8Array(o),a.set(m[0]),c=1;c<m.length;c++)for(n=m[c],v=0;v<o;v++)a[v]=a[v]&n[v];s.maskData=a}return s}};K=[],E=(function(){return ee}).apply(ne,K),E!==void 0&&(G.exports=E)})()})}]);
