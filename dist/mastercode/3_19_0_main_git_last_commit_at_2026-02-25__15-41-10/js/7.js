(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{3254:(function(ce,ye,ie){var le=Object.create,B=Object.defineProperty,ae=Object.getOwnPropertyDescriptor,fe=Object.getOwnPropertyNames,ue=Object.getPrototypeOf,he=Object.prototype.hasOwnProperty,de=(g,r)=>{for(var o in r)B(g,o,{get:r[o],enumerable:!0})},ee=(g,r,o,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let _ of fe(r))!he.call(g,_)&&_!==o&&B(g,_,{get:()=>r[_],enumerable:!(a=ae(r,_))||a.enumerable});return g},be=(g,r,o)=>(o=g!=null?le(ue(g)):{},ee(r||!g||!g.__esModule?B(o,"default",{value:g,enumerable:!0}):o,g)),pe=g=>ee(B({},"__esModule",{value:!0}),g),ne={};de(ne,{default:()=>Ce}),ce.exports=pe(ne);var we=be(ie(1898));const R=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),V=4017,G=799,N=3406,z=2276,X=1567,Y=3784,U=5793,Z=2896;function te(g,r){let o=0;const a=[];let _=16;for(;_>0&&!g[_-1];)--_;a.push({children:[],index:0});let k=a[0],x;for(let t=0;t<_;t++){for(let h=0;h<g[t];h++){if(k=a.pop(),!k)throw new Error("buildHuffmanTable: codeLength mismatch");for(k.children[k.index]=r[o];k.index>0;)if(k=a.pop(),!k)throw new Error("buildHuffmanTable: codeLength mismatch");for(k.index++,a.push(k);a.length<=t;)a.push(x={children:[],index:0}),k.children[k.index]=x.children,k=x;o++}t+1<_&&(a.push(x={children:[],index:0}),k.children[k.index]=x.children,k=x)}return a[0].children}function me(g,r,o,a,_,k,x,t,h){const{mcusPerLine:d,progressive:i}=o,c=r;let b=r,l=0,p=0;function w(){if(p>0)return p--,l>>p&1;if(l=g[b++],l===255){const u=g[b++];if(u)throw new Error(`unexpected marker: ${(l<<8|u).toString(16)}`)}return p=7,l>>>7}function m(u){let f=u,v;for(;(v=w())!==null;){if(f=f[v],typeof f=="number")return f;if(typeof f!="object")throw new Error("invalid huffman sequence")}return null}function P(u){let f=u,v=0;for(;f>0;){const j=w();if(j===null)return;v=v<<1|j,--f}return v}function C(u){const f=P(u);if(f!==void 0)return f>=1<<u-1?f:f+(-1<<u)+1}function T(u,f){const v=m(u.huffmanTableDC),j=v===0?0:C(v);u.pred+=j,f[0]=u.pred;let A=1;for(;A<64;){const E=m(u.huffmanTableAC);if(E===null)throw new Error("Unexpected end of data in AC coefficient decoding");const D=E&15,q=E>>4;if(D===0){if(q<15)break;A+=16}else{A+=q;const O=R[A];f[O]=C(D),A++}}}function L(u,f){const v=m(u.huffmanTableDC),j=C(v);if(j===void 0)throw new Error("Unexpected end of data in DC coefficient decoding");const A=v===0?0:j<<h;u.pred+=A,f[0]=u.pred}function s(u,f){f[0]|=w()<<h}let n=0;function y(u,f){if(n>0){n--;return}let v=k;const j=x;for(;v<=j;){const A=m(u.huffmanTableAC);if(A===null)throw new Error("Unexpected end of data in AC coefficient decoding");const E=A&15,D=A>>4;if(E===0){if(D<15){const q=P(D);if(q===void 0)throw new Error("Unexpected end of data in AC coefficient decoding");n=q+(1<<D)-1;break}v+=16}else{v+=D;const q=R[v],O=C(E);if(O===void 0)throw new Error("Unexpected end of data in AC coefficient decoding");f[q]=O*(1<<h),v++}}}let e=0,oe;function ge(u,f){let v=k;const j=x;let A=0;for(;v<=j;){const E=R[v],D=f[E]<0?-1:1;switch(e){case 0:{const q=m(u.huffmanTableAC);if(q===null)throw new Error("Unexpected end of data in AC coefficient decoding");const O=q&15;if(A=q>>4,O===0)if(A<15){const re=P(A);if(re===void 0)throw new Error("Unexpected end of data in AC coefficient decoding");n=re+(1<<A),e=4}else A=16,e=1;else{if(O!==1)throw new Error("invalid ACn encoding");oe=C(O),e=A?2:3}continue}case 1:case 2:f[E]?f[E]+=(w()<<h)*D:(A--,A===0&&(e=e===2?3:0));break;case 3:f[E]?f[E]+=(w()<<h)*D:(f[E]=oe<<h,e=0);break;case 4:f[E]&&(f[E]+=(w()<<h)*D);break;default:break}v++}e===4&&(n--,n===0&&(e=0))}function xe(u,f,v,j,A){const E=v/d|0,D=v%d,q=E*u.v+j,O=D*u.h+A;f(u,u.blocks[q][O])}function Pe(u,f,v){const j=v/u.blocksPerLine|0,A=v%u.blocksPerLine;f(u,u.blocks[j][A])}const $=a.length;let H,S,Q,W,I,J;i?k===0?J=t===0?L:s:J=t===0?y:ge:J=T;let M=0,K,F;$===1?F=a[0].blocksPerLine*a[0].blocksPerColumn:F=d*o.mcusPerColumn;const se=_||F;for(;M<F;){for(S=0;S<$;S++)a[S].pred=0;if(n=0,$===1)for(H=a[0],I=0;I<se;I++)Pe(H,J,M),M++;else for(I=0;I<se;I++){for(S=0;S<$;S++){H=a[S];const{h:u,v:f}=H;for(Q=0;Q<f;Q++)for(W=0;W<u;W++)xe(H,J,M,Q,W)}if(M++,M===F)break}if(p=0,K=g[b]<<8|g[b+1],K<65280)throw new Error("marker was not found");if(K>=65488&&K<=65495)b+=2;else break}return b-c}function ke(g,r){const o=[],{blocksPerLine:a,blocksPerColumn:_}=r,k=a<<3,x=new Int32Array(64),t=new Uint8Array(64);function h(d,i,c){const b=r.quantizationTable;let l,p,w,m,P,C,T,L,s;const n=c;let y;for(y=0;y<64;y++)n[y]=d[y]*b[y];for(y=0;y<8;++y){const e=8*y;if(n[1+e]===0&&n[2+e]===0&&n[3+e]===0&&n[4+e]===0&&n[5+e]===0&&n[6+e]===0&&n[7+e]===0){s=U*n[0+e]+512>>10,n[0+e]=s,n[1+e]=s,n[2+e]=s,n[3+e]=s,n[4+e]=s,n[5+e]=s,n[6+e]=s,n[7+e]=s;continue}l=U*n[0+e]+128>>8,p=U*n[4+e]+128>>8,w=n[2+e],m=n[6+e],P=Z*(n[1+e]-n[7+e])+128>>8,L=Z*(n[1+e]+n[7+e])+128>>8,C=n[3+e]<<4,T=n[5+e]<<4,s=l-p+1>>1,l=l+p+1>>1,p=s,s=w*Y+m*X+128>>8,w=w*X-m*Y+128>>8,m=s,s=P-T+1>>1,P=P+T+1>>1,T=s,s=L+C+1>>1,C=L-C+1>>1,L=s,s=l-m+1>>1,l=l+m+1>>1,m=s,s=p-w+1>>1,p=p+w+1>>1,w=s,s=P*z+L*N+2048>>12,P=P*N-L*z+2048>>12,L=s,s=C*G+T*V+2048>>12,C=C*V-T*G+2048>>12,T=s,n[0+e]=l+L,n[7+e]=l-L,n[1+e]=p+T,n[6+e]=p-T,n[2+e]=w+C,n[5+e]=w-C,n[3+e]=m+P,n[4+e]=m-P}for(y=0;y<8;++y){const e=y;if(n[8+e]===0&&n[16+e]===0&&n[24+e]===0&&n[32+e]===0&&n[40+e]===0&&n[48+e]===0&&n[56+e]===0){s=U*c[y+0]+8192>>14,n[0+e]=s,n[8+e]=s,n[16+e]=s,n[24+e]=s,n[32+e]=s,n[40+e]=s,n[48+e]=s,n[56+e]=s;continue}l=U*n[0+e]+2048>>12,p=U*n[32+e]+2048>>12,w=n[16+e],m=n[48+e],P=Z*(n[8+e]-n[56+e])+2048>>12,L=Z*(n[8+e]+n[56+e])+2048>>12,C=n[24+e],T=n[40+e],s=l-p+1>>1,l=l+p+1>>1,p=s,s=w*Y+m*X+2048>>12,w=w*X-m*Y+2048>>12,m=s,s=P-T+1>>1,P=P+T+1>>1,T=s,s=L+C+1>>1,C=L-C+1>>1,L=s,s=l-m+1>>1,l=l+m+1>>1,m=s,s=p-w+1>>1,p=p+w+1>>1,w=s,s=P*z+L*N+2048>>12,P=P*N-L*z+2048>>12,L=s,s=C*G+T*V+2048>>12,C=C*V-T*G+2048>>12,T=s,n[0+e]=l+L,n[56+e]=l-L,n[8+e]=p+T,n[48+e]=p-T,n[16+e]=w+C,n[40+e]=w-C,n[24+e]=m+P,n[32+e]=m-P}for(y=0;y<64;++y){const e=128+(n[y]+8>>4);e<0?i[y]=0:e>255?i[y]=255:i[y]=e}}for(let d=0;d<_;d++){const i=d<<3;for(let c=0;c<8;c++)o.push(new Uint8Array(k));for(let c=0;c<a;c++){h(r.blocks[d][c],t,x);let b=0;const l=c<<3;for(let p=0;p<8;p++){const w=o[i+p];for(let m=0;m<8;m++)w[l+m]=t[b++]}}}return o}class ve{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.frames=[]}resetFrames(){this.frames=[]}parse(r){let o=0;function a(){const t=r[o]<<8|r[o+1];return o+=2,t}function _(){const t=a(),h=r.subarray(o,o+t-2);return o+=h.length,h}function k(t){let h=0,d=0,i,c;for(c in t.components)t.components.hasOwnProperty(c)&&(i=t.components[c],h<i.h&&(h=i.h),d<i.v&&(d=i.v));const b=Math.ceil(t.samplesPerLine/8/h),l=Math.ceil(t.scanLines/8/d);for(c in t.components)if(t.components.hasOwnProperty(c)){i=t.components[c];const p=Math.ceil(Math.ceil(t.samplesPerLine/8)*i.h/h),w=Math.ceil(Math.ceil(t.scanLines/8)*i.v/d),m=b*i.h,P=l*i.v,C=[];for(let T=0;T<P;T++){const L=[];for(let s=0;s<m;s++)L.push(new Int32Array(64));C.push(L)}i.blocksPerLine=p,i.blocksPerColumn=w,i.blocks=C}t.maxH=h,t.maxV=d,t.mcusPerLine=b,t.mcusPerColumn=l}let x=a();if(x!==65496)throw new Error("SOI not found");for(x=a();x!==65497;){switch(x){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const t=_();x===65504&&t[0]===74&&t[1]===70&&t[2]===73&&t[3]===70&&t[4]===0&&(this.jfif={version:{major:t[5],minor:t[6]},densityUnits:t[7],xDensity:t[8]<<8|t[9],yDensity:t[10]<<8|t[11],thumbWidth:t[12],thumbHeight:t[13],thumbData:t.subarray(14,14+3*t[12]*t[13])}),x===65518&&t[0]===65&&t[1]===100&&t[2]===111&&t[3]===98&&t[4]===101&&t[5]===0&&(this.adobe={version:t[6],flags0:t[7]<<8|t[8],flags1:t[9]<<8|t[10],transformCode:t[11]});break}case 65499:{const h=a()+o-2;for(;o<h;){const d=r[o++],i=new Int32Array(64);if(d>>4===0)for(let c=0;c<64;c++){const b=R[c];i[b]=r[o++]}else if(d>>4===1)for(let c=0;c<64;c++){const b=R[c];i[b]=a()}else throw new Error("DQT: invalid table spec");this.quantizationTables[d&15]=i}break}case 65472:case 65473:case 65474:{a();const t={extended:x===65473,progressive:x===65474,precision:r[o++],scanLines:a(),samplesPerLine:a(),components:{},componentsOrder:[]},h=r[o++];let d;for(let i=0;i<h;i++){d=r[o];const c=r[o+1]>>4,b=r[o+1]&15,l=r[o+2];t.componentsOrder.push(d),t.components[d]={h:c,v:b,quantizationIdx:l},o+=3}k(t),this.frames.push(t);break}case 65476:{const t=a();for(let h=2;h<t;){const d=r[o++],i=new Uint8Array(16);let c=0;for(let l=0;l<16;l++,o++)i[l]=r[o],c+=i[l];const b=new Uint8Array(c);for(let l=0;l<c;l++,o++)b[l]=r[o];h+=17+c,d>>4===0?this.huffmanTablesDC[d&15]=te(i,b):this.huffmanTablesAC[d&15]=te(i,b)}break}case 65501:a(),this.resetInterval=a();break;case 65498:{a();const t=r[o++],h=[],d=this.frames[0];for(let p=0;p<t;p++){const w=d.components[r[o++]],m=r[o++];w.huffmanTableDC=this.huffmanTablesDC[m>>4],w.huffmanTableAC=this.huffmanTablesAC[m&15],h.push(w)}const i=r[o++],c=r[o++],b=r[o++],l=me(r,o,d,h,this.resetInterval,i,c,b>>4,b&15);o+=l;break}case 65535:r[o]!==255&&o--;break;default:if(r[o-3]===255&&r[o-2]>=192&&r[o-2]<=254){o-=3;break}throw new Error(`unknown JPEG marker ${x.toString(16)}`)}x=a()}}getResult(){const{frames:r}=this;if(this.frames.length===0)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(let i=0;i<this.frames.length;i++){const c=this.frames[i].components;for(const b of Object.keys(c))c[b].quantizationTable=this.quantizationTables[c[b].quantizationIdx],delete c[b].quantizationIdx}const o=r[0],{components:a,componentsOrder:_}=o,k=[],x=o.samplesPerLine,t=o.scanLines;for(let i=0;i<_.length;i++){const c=a[_[i]];k.push({lines:ke(o,c),scaleX:c.h/o.maxH,scaleY:c.v/o.maxV})}const h=new Uint8Array(x*t*k.length);let d=0;for(let i=0;i<t;++i)for(let c=0;c<x;++c)for(let b=0;b<k.length;++b){const l=k[b];h[d]=l.lines[0|i*l.scaleY][0|c*l.scaleX],++d}return h}}class Ce extends we.default{constructor(r){super(r),this.reader=new ve,r.JPEGTables&&this.reader.parse(r.JPEGTables)}decodeBlock(r){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(r)),this.reader.getResult().buffer}}})}]);
